(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{2257:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return a(5879)}])},2470:function(e,t,a){"use strict";var s=a(5893),l=a(7294),i=a(8539),n=a(6788),r=a(3379),o=a(5770),d=a(7638),c=a(2200),x=a(4291),h=a(990),u=a(6912),m=a(4237),p=a(6795),j=a(2857),Z=a(7958),f=a(18),y=a(1220),g=a(3246),v=a(9129),b=a(5854),w=a(3837),k=a(5413),C=a(5861),A=a(1897),S=a(899),z=a(1664),P=a.n(z),T=a(5482);let D=[{text:"Dashboard",icon:(0,s.jsx)(f.Z,{}),path:"/admin"},{text:"E-Ticaret",icon:(0,s.jsx)(y.Z,{}),subItems:[{text:"\xdcr\xfcnler",path:"/admin/products"},{text:"Siparişler",path:"/admin/orders"},{text:"Kategoriler",path:"/admin/categories"},{text:"Y\xf6netim Paneli",path:"/admin"}]},{text:"Kullanıcılar",icon:(0,s.jsx)(g.Z,{}),path:"/admin/users"},{text:"Raporlar",icon:(0,s.jsx)(v.Z,{}),path:"/admin/reports"},{text:"Ayarlar",icon:(0,s.jsx)(b.Z,{}),path:"/admin/settings"}];t.Z=e=>{let{children:t,pageTitle:a}=e,[f,y]=(0,l.useState)(!1),[g,v]=(0,l.useState)(null),{signOut:b}=(0,T.a)(),z=()=>{y(!f)},I=e=>{v(g===e?null:e)},B=(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.Z,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:600},children:"Y\xf6netim Paneli"})}),(0,s.jsx)(r.Z,{children:D.map((e,t)=>(0,s.jsx)(l.Fragment,{children:e.subItems?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.ZP,{button:!0,onClick:()=>I(e.text),children:[(0,s.jsx)(d.Z,{children:e.icon}),(0,s.jsx)(c.Z,{primary:e.text}),g===e.text?(0,s.jsx)(w.Z,{}):(0,s.jsx)(k.Z,{})]}),(0,s.jsx)(x.Z,{in:g===e.text,timeout:"auto",unmountOnExit:!0,children:(0,s.jsx)(r.Z,{component:"div",disablePadding:!0,children:e.subItems.map(e=>(0,s.jsx)(P(),{href:e.path,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(o.ZP,{button:!0,component:"a",sx:{pl:4},children:(0,s.jsx)(c.Z,{primary:e.text})})},e.text))})})]}):(0,s.jsx)(P(),{href:e.path,passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)(o.ZP,{button:!0,component:"a",children:[(0,s.jsx)(d.Z,{children:e.icon}),(0,s.jsx)(c.Z,{primary:e.text})]})})},e.text))}),(0,s.jsxs)(h.Z,{sx:{position:"absolute",bottom:0,width:"100%"},children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(P(),{href:"/",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)(o.ZP,{button:!0,component:"a",children:[(0,s.jsx)(d.Z,{children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)(c.Z,{primary:"Ana Sayfaya D\xf6n"})]})}),(0,s.jsx)(u.Z,{}),(0,s.jsxs)(o.ZP,{button:!0,onClick:b,children:[(0,s.jsx)(d.Z,{children:(0,s.jsx)(A.Z,{})}),(0,s.jsx)(c.Z,{primary:"\xc7ıkış Yap"})]})]})]});return(0,s.jsxs)(h.Z,{sx:{display:"flex"},children:[(0,s.jsx)(m.ZP,{}),(0,s.jsx)(p.Z,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")},bgcolor:"background.paper",color:"text.primary",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"},children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(j.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:z,sx:{mr:2,display:{sm:"none"}},children:(0,s.jsx)(S.Z,{})}),(0,s.jsx)(n.Z,{variant:"h6",noWrap:!0,component:"div",children:a||"Dashboard"})]})}),(0,s.jsxs)(h.Z,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},children:[(0,s.jsx)(Z.ZP,{variant:"temporary",open:f,onClose:z,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:B}),(0,s.jsx)(Z.ZP,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:B})]}),(0,s.jsxs)(h.Z,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")},bgcolor:"#f4f6f8",minHeight:"100vh"},children:[(0,s.jsx)(i.Z,{}),t]})]})}},8148:function(e,t,a){"use strict";var s=a(3077),l=a(5893);t.Z=(0,s.Z)((0,l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},1313:function(e,t,a){"use strict";var s=a(3077),l=a(5893);t.Z=(0,s.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},5879:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return W}});var s=a(5893),l=a(7294),i=a(9346),n=a(5972),r=a(4677),o=a(7182),d=a(4723),c=a(990),x=a(3453),h=a(2365),u=a(6788),m=a(110),p=a(3379),j=a(5770),Z=a(8573),f=a(6541),y=a(1778),g=a(2166),v=a(1873),b=a(2857),w=a(6912),k=a(6727),C=a(760),A=a(1947),S=a(3077),z=(0,S.Z)((0,s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),P=a(8148),T=(0,S.Z)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),D=a(5861),I=a(1313),B=a(3977),E=a(9265),N=a(2470),_=a(5482),W=()=>{let{user:e}=(0,_.a)(),[t,a]=(0,l.useState)([]),[S,W]=(0,l.useState)(!0),[K,M]=(0,l.useState)(null),[H,L]=(0,l.useState)(null),[O,R]=(0,l.useState)([]),[V,F]=(0,l.useState)(!1),[G,U]=(0,l.useState)(!1),[Y,J]=(0,l.useState)(null),[X,$]=(0,l.useState)({}),[q,Q]=(0,l.useState)({open:!1,message:"",severity:"success"});(0,l.useEffect)(()=>{ee()},[e]);let ee=async()=>{if(e)try{W(!0),M(null);let t=await e.getIdToken(),s=await fetch("http://localhost:5000/api/admin/users",{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Kullanıcılar y\xfcklenemedi.");let l=await s.json();a(l)}catch(e){M(e.message)}finally{W(!1)}},et=async(s,l)=>{try{let i=await e.getIdToken();if(!(await fetch("http://localhost:5000/api/admin/users/".concat(s,"/role"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({role:l})})).ok)throw Error("Rol g\xfcncellenemedi.");a(t.map(e=>e.id===s?{...e,role:l}:e))}catch(e){alert(e.message)}},ea=async t=>{try{U(!0),L(t);let a=await e.getIdToken(),s=await fetch("http://localhost:5000/api/admin/addresses",{headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw Error("Adresler y\xfcklenemedi.");let l=(await s.json()).filter(e=>e.userId===t.id);R(l),F(!0)}catch(e){alert("Adresler y\xfcklenirken hata oluştu: "+e.message)}finally{U(!1)}},es=()=>{F(!1),L(null),R([]),J(null),$({})},el=e=>{J(e.id),$({title:e.title,fullAddress:e.fullAddress,city:e.city,district:e.district,postalCode:e.postalCode,isDefault:e.isDefault})},ei=()=>{J(null),$({})},en=async t=>{try{let a=await e.getIdToken();if(!(await fetch("http://localhost:5000/api/admin/addresses/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(X)})).ok)throw Error("Adres g\xfcncellenemedi.");R(O.map(e=>e.id===t?{...e,...X,updatedAt:new Date}:e)),J(null),$({}),Q({open:!0,message:"Adres başarıyla g\xfcncellendi!",severity:"success"})}catch(e){Q({open:!0,message:"Adres g\xfcncellenirken hata oluştu: "+e.message,severity:"error"})}},er=(e,t)=>{$(a=>({...a,[e]:t}))},eo=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ed=[{field:"displayName",headerName:"Ad Soyad",flex:1,minWidth:180},{field:"email",headerName:"E-posta",flex:1,minWidth:220},{field:"role",headerName:"Rol",width:150,renderCell:e=>(0,s.jsxs)(i.Z,{value:e.value,onChange:t=>et(e.id,t.target.value),size:"small",sx:{width:"100%"},children:[(0,s.jsx)(n.Z,{value:"user",children:"User"}),(0,s.jsx)(n.Z,{value:"admin",children:"Admin"})]})},{field:"createdAt",headerName:"Kayıt Tarihi",width:180,type:"dateTime",valueGetter:e=>new Date(e.value),valueFormatter:e=>new Date(e.value).toLocaleString("tr-TR")},{field:"actions",headerName:"İşlemler",width:150,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(r.Z,{variant:"outlined",size:"small",startIcon:(0,s.jsx)(A.Z,{}),onClick:()=>ea(e.row),disabled:G,children:"Adresler"})}];return S?(0,s.jsx)(N.Z,{pageTitle:"Kullanıcılar",children:(0,s.jsx)(o.Z,{})}):K?(0,s.jsx)(N.Z,{pageTitle:"Kullanıcılar",children:(0,s.jsx)(d.Z,{severity:"error",children:K})}):(0,s.jsxs)(N.Z,{pageTitle:"Kullanıcılar",children:[(0,s.jsx)(c.Z,{sx:{height:650,width:"100%",backgroundColor:"#fff",borderRadius:2},children:(0,s.jsx)(B._$,{rows:t,columns:ed,pageSize:10,rowsPerPageOptions:[10,25,50],components:{Toolbar:E.n},getRowId:e=>e.id})}),(0,s.jsxs)(x.Z,{open:V,onClose:es,maxWidth:"md",fullWidth:!0,children:[(0,s.jsx)(h.Z,{children:(0,s.jsxs)(c.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,s.jsx)(A.Z,{color:"primary"}),(0,s.jsxs)(u.Z,{variant:"h6",children:[null==H?void 0:H.displayName," - Adres Bilgileri"]})]})}),(0,s.jsx)(m.Z,{children:G?(0,s.jsx)(c.Z,{display:"flex",justifyContent:"center",py:4,children:(0,s.jsx)(o.Z,{})}):0===O.length?(0,s.jsxs)(c.Z,{textAlign:"center",py:4,children:[(0,s.jsx)(A.Z,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,s.jsx)(u.Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Adres Bulunamadı"}),(0,s.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Bu kullanıcının hen\xfcz kayıtlı adresi bulunmuyor."})]}):(0,s.jsx)(p.Z,{children:O.map((e,t)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(j.ZP,{sx:{px:0,py:2},children:(0,s.jsx)(c.Z,{sx:{width:"100%"},children:Y===e.id?(0,s.jsx)(c.Z,{children:(0,s.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(Z.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Adres Başlığı",value:X.title,onChange:e=>er("title",e.target.value),size:"small"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Tam Adres",value:X.fullAddress,onChange:e=>er("fullAddress",e.target.value),multiline:!0,rows:2,size:"small"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Şehir",value:X.city,onChange:e=>er("city",e.target.value),size:"small"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"İl\xe7e",value:X.district,onChange:e=>er("district",e.target.value),size:"small"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,sm:4,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Posta Kodu",value:X.postalCode,onChange:e=>er("postalCode",e.target.value),size:"small"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,children:(0,s.jsx)(y.Z,{control:(0,s.jsx)(g.Z,{checked:X.isDefault,onChange:e=>er("isDefault",e.target.checked)}),label:"Varsayılan Adres"})}),(0,s.jsx)(Z.ZP,{item:!0,xs:12,children:(0,s.jsxs)(c.Z,{display:"flex",gap:1,children:[(0,s.jsx)(r.Z,{variant:"contained",startIcon:(0,s.jsx)(z,{}),onClick:()=>en(e.id),size:"small",children:"Kaydet"}),(0,s.jsx)(r.Z,{variant:"outlined",startIcon:(0,s.jsx)(P.Z,{}),onClick:ei,size:"small",children:"İptal"})]})})]})}):(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)(c.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1,children:[(0,s.jsxs)(c.Z,{display:"flex",alignItems:"center",gap:1,children:[e.isDefault?(0,s.jsx)(T,{color:"warning",fontSize:"small"}):(0,s.jsx)(D.Z,{color:"action",fontSize:"small"}),(0,s.jsx)(u.Z,{variant:"h6",component:"div",children:e.title}),e.isDefault&&(0,s.jsx)(v.Z,{label:"Varsayılan",color:"warning",size:"small",variant:"outlined"})]}),(0,s.jsx)(b.Z,{size:"small",onClick:()=>el(e),color:"primary",children:(0,s.jsx)(I.Z,{})})]}),(0,s.jsx)(u.Z,{variant:"body1",gutterBottom:!0,children:e.fullAddress}),(0,s.jsxs)(u.Z,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[e.district,", ",e.city," ",e.postalCode]}),(0,s.jsxs)(c.Z,{display:"flex",gap:2,mt:1,children:[(0,s.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["Oluşturulma: ",eo(e.createdAt)]}),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,s.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["G\xfcncellenme: ",eo(e.updatedAt)]})]})]})})}),t<O.length-1&&(0,s.jsx)(w.Z,{})]},e.id))})}),(0,s.jsx)(k.Z,{children:(0,s.jsx)(r.Z,{onClick:es,children:"Kapat"})})]}),(0,s.jsx)(C.Z,{open:q.open,autoHideDuration:6e3,onClose:()=>Q({...q,open:!1}),children:(0,s.jsx)(d.Z,{onClose:()=>Q({...q,open:!1}),severity:q.severity,sx:{width:"100%"},children:q.message})})]})}}},function(e){e.O(0,[22,390,723,345,541,716,873,770,916,573,793,230,592,847,888,774,179],function(){return e(e.s=2257)}),_N_E=e.O()}]);